---
title: Pod crash
exercise: 2
date: '2020-01-03'
tags: ['easy', 'pod']
draft: false
authors: ['default']
summary: "Why is this pod crashing?"
---
The OpenShift Social Club has decided to organize a chess tournament, and want to host the chess game on OpenShift.
They almost manage to get the pod to run, but there is an issue. As the OpenShift expert, you have been voluntold to investigate the issue.


Let's get started!

<TOCInline toc={props.toc} asDisclosure />


## What's going on?
Navigate to your project (exercise02-userXX), make sure you are in the developer perspective, and pick the "Topology view" from the left pannel.
The deployment is in red (sometime orange for a few seconds), so something is not right, we want this nice dark blue deployment color


<Zoom>
![topology](/static/images/exercise2/problem.png)
</Zoom>

You may try and identify the issue. Poke around, click, explore.
If no luck after a few minutes, then check the hints below as needed.

## Hints
### Hint 1
<details>
  <summary>How do I see a deployment overview?</summary>

You can get a quick overview of the deployment situation by clicking on the deployment icon.
You can probably see some early indications of the problem.
<Zoom>
![hint1](/static/images/exercise2/hint1.png)
</Zoom>

In the following hints, we are going to explore the three options (events, logs and debugs).

</details>

### Hint 2
<details>
  <summary>Checking the events...</summary>

From Hint1, if you click on `View events`, you should see:
<Zoom>
![hint2](/static/images/exercise2/hint2.png)
</Zoom>
You probably noticed there is not much additional information, just a confirmation of the crashloop.
</details>

### Hint 3
<details>
  <summary>Exploring container debugs...</summary>

From Hint1, if you click on `Debug container chess`:
OpenShift starts a new chess container, but overwrite the entrypoint command to give you a shell instead:

<Zoom>
![hint3](/static/images/exercise2/hint3.png)
</Zoom>
You can try and run the npm command, this should give you some logs that indicate everything is running,
as expected. So what's happening?

</details>


## Solution


## Did you know?

### Administrator perspective
When you switch to the admin perspective, you won't have the nice "topology view", but the information
is presented to you with more details, often better suited when doing admin tasks.
<Zoom>
![duk3](/static/images/exercise2/duk1.png)
</Zoom>



## Take away
Some summary
- point 1
- point 2

## Stretch goal
Have a look at Hint 3, the one about the debug pod. While we started the npm app with the right
command, one step further would be to create a service, a route, and open the route from a web
browser, all that to check that the chess game is correctly running in this debug pod. Here is some helpful info:
- the debug pod doesn't have any label. You will need to add one (edit the yaml file), i.e. `app: debug-chess` that will be used by the service
- when creating a service via the web console, the default yaml will not have the correct app selector, and will not use the correct port. Make sure to use 
`port: 3000` and `targetPort: 3000` for this node app
- the route creation via the web console should be intuitive. 



